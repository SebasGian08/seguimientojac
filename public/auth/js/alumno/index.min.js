$(function(){let a=$("#tableAlumno"),b=a.DataTable({stripeClasses:["odd-row","even-row"],lengthChange:!0,lengthMenu:[[25,50,100,200,500,-1],[25,50,100,200,500,"Todo"]],info:!1,ajax:{url:"/auth/alumno/list_all",dataSrc:function(a){return console.log(a.data),a.data}},columns:[{title:"ID",data:"id",className:"text-center"},{title:"Fecha de Registro",data:"created_at",render:function(a){return null!=a?moment(a).format("DD-MM-YYYY"):"-"}},{title:"CV",data:"id",render:function(a){return"<a href='/auth/alumno/print_cv_pdf/"+a+"' class='btn btn-info btn-xs' data-toggle='tooltip' title='CV'><i class='fa fa-address-card'></i></button>"}},{title:"DNI",data:"dni"},{title:"Nombres",data:"nombres"},{title:"Apellidos",data:"apellidos"},{title:"E-mail",data:"email"},{title:"Tel\xe9fono",data:"telefono"},{title:"Estado",data:"egresado",render:function(a){return a==TIPOS_ALUMNOS.ALUMNO?"Alumno":a==TIPOS_ALUMNOS.EGRESADO?"Egresado":a==TIPOS_ALUMNOS.TITULADO?"Titulado":"-"}},{title:"Carrera",data:"areas.nombre",render:function(a){return a||"-"}},{title:"Ciudad",data:"provincias.nombre",render:function(a){return a||"-"}},{title:"Distrito",data:"distritos.nombre",render:function(a){return a||"-"}},{title:"",data:null,render:function(a){return null===a.telefono||""===a.telefono||null===a.email||""===a.email||null===a.fecha_nacimiento||""===a.fecha_nacimiento||null===a.area_id||""===a.area_id?"<img src='/auth/image/icon/warning.png' width='25px' title='Falta completar informaci\xf3n'>":"-"}},{data:null,render:function(a){return a.aprobado==ESTADOS.CANCELADO?"<button type='button' class='btn btn-success btn-xs btn-approved' data-toggle='tooltip' title='Aprobar'><i class='fa fa-check'></i></button>":""},orderable:!1,searchable:!1,width:"26px"},{data:null,render:function(a){return a.aprobado==ESTADOS.APROBADO?"<button type='button' class='btn btn-warning btn-xs btn-cancel' data-toggle='tooltip' title='Dar de baja'><i class='fa fa-ban'></i></button>":""},orderable:!1,searchable:!1,width:"26px"},{data:null,defaultContent:"<button type='button' class='btn btn-danger btn-xs btn-delete' data-toggle='tooltip' title='Eliminar'><i class='fa fa-trash'></i></button>",orderable:!1,searchable:!1,width:"26px"}]});a.on("click",".btn-cancel",function(){let c=b.row($(this).parents("tr")).data().id,a=new FormData;a.append("_token",$("input[name=_token]").val()),a.append("id",c),a.append("update_id",ESTADOS.CANCELADO),confirmAjax("/auth/alumno/update",a,"POST",null,null,function(){b.ajax.reload(null,!1)})}),a.on("click",".btn-approved",function(){let c=b.row($(this).parents("tr")).data().id,a=new FormData;a.append("_token",$("input[name=_token]").val()),a.append("id",c),a.append("update_id",ESTADOS.APROBADO),confirmAjax("/auth/alumno/update",a,"POST",null,null,function(){b.ajax.reload(null,!1)})}),a.on("click",".btn-delete",function(){let c=b.row($(this).parents("tr")).data().id,a=new FormData;a.append("_token",$("input[name=_token]").val()),a.append("id",c),confirmAjax("/auth/alumno/delete",a,"POST",null,null,function(){b.ajax.reload(null,!1)})})})